// Generated by CoffeeScript 1.8.0
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  mysli.web.ui.root = (function(_super) {
    var template, ui;

    __extends(root, _super);

    ui = mysli.web.ui;

    template = '<div class="ui-root ui-widget"></div>';

    function root() {
      root.__super__.constructor.apply(this, arguments);
      this.elements.push($(template));
      this.parent = $('body');
      this.resize_timer = false;
      this.get_element().css({
        top: 0,
        left: 0,
        position: 'relative'
      });
      this.parent.css('overflow', 'hidden');
      this.container.master = this.container.target = this.get_element();
      this.set_size_to_window();
    }


    /*
    Set element's size to window's size
     */

    root.prototype.set_size_to_window = function() {
      return this.set_size({
        width: $(window).outerWidth(),
        height: $(window).outerHeight()
      });
    };


    /*
    Show (append) root element (and all containing elements) to the body
     */

    root.prototype.show = function() {
      return this.parent.append(this.get_element());
    };


    /*
    Weather page should track resize event(s)
    @param {boolean} status
    @param {integer} timeout
     */

    root.prototype.set_track_resize = function(status, timeout) {
      if (timeout == null) {
        timeout = 500;
      }
      if (status) {
        return $(window).on('resize', (function(_this) {
          return function() {
            if (_this.resize_timer) {
              clearTimeout(_this.resize_timer);
            }
            return _this.resize_timer = setTimeout(_this.set_size_to_window.bind(_this), timeout);
          };
        })(this));
      } else {
        if (this.resize_timer) {
          return clearTimeout(this.resize_timer);
        }
      }
    };

    return root;

  })(mysli.web.ui.container);

}).call(this);
