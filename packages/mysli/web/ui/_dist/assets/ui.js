mysli="object"==typeof mysli?mysli:{},mysli.web="object"==typeof mysli.web?mysli.web:{},mysli.web.ui="object"==typeof mysli.web.ui?mysli.web.ui:{},mysli="object"==typeof mysli?mysli:{},mysli.web="object"==typeof mysli.web?mysli.web:{},mysli.web.ui="object"==typeof mysli.web.ui?mysli.web.ui:{},mysli.web.ui.const={HORIZONTAL:"horizontal",VERTICAL:"vertical",START:"start",END:"end",LEFT:"left",RIGHT:"right",STYLE_DEFAULT:"default",STYLE_ALT:"alt",STYLE_PRIMARY:"primary",STYLE_CONFIRM:"confirm",STYLE_ATTENTION:"attention"},mysli.web.ui.const={HORIZONTAL:"horizontal",VERTICAL:"vertical",START:"start",END:"end",LEFT:"left",RIGHT:"right",STYLE_DEFAULT:"default",STYLE_ALT:"alt",STYLE_PRIMARY:"primary",STYLE_CONFIRM:"confirm",STYLE_ATTENTION:"attention"},function(){mysli.web.ui.util={apply_options:function(options,context,methods){var arg,call,expect,params,_i,_len;null==methods&&(methods={});for(call in methods){if(expect=methods[call],params=[],"string"==typeof expect)params.push(options[expect]);else for(_i=0,_len=expect.length;_len>_i;_i++)arg=expect[_i],params.push(options[arg]);context[call].apply(context,params)}},merge_options:function(options,defaults){return $.extend({},defaults,options)},number_format:function(number,decimals,dec_point,thousands_sep){var n,prec,s,to_fixed_fix;return null==dec_point&&(dec_point="."),null==thousands_sep&&(thousands_sep=","),number=(number+"").replace(/[^0-9+\-Ee.]/g,""),n=isFinite(+number)?+number:0,prec=isFinite(+decimals)?Math.abs(decimals):0,s="",to_fixed_fix=function(n,prec){var k;return k=Math.pow(10,prec),""+Math.round(n*k)/k},s=prec?to_fixed_fix(n,prec):""+Math.round(n),s=s.split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,thousands_sep)),(s[1]||"").length<prec&&(s[1]=s[1]||"",s[1]+=new Array(prec-s[1].length+1).join("0")),s.join(dec_point)},get_percent:function(amount,total,percision){var count;return"number"==typeof amount&&"number"==typeof total?(percision=percision||2,amount&&total?(count=amount/total,count=100*count,count=parseFloat(this.number_format(count,percision))):amount):!1},set_percent:function(percent,total,percision){var result;return"number"==typeof percent&&"number"==typeof total?(percision=percision||2,percent&&total?result=parseFloat(this.number_format(total/100*percent,percision)):0):!1}}}.call(this),function(){mysli.web.ui.util={apply_options:function(options,context,methods){var arg,call,expect,params,_i,_len;null==methods&&(methods={});for(call in methods){if(expect=methods[call],params=[],"string"==typeof expect)params.push(options[expect]);else for(_i=0,_len=expect.length;_len>_i;_i++)arg=expect[_i],params.push(options[arg]);context[call].apply(context,params)}},merge_options:function(options,defaults){return $.extend({},defaults,options)},number_format:function(number,decimals,dec_point,thousands_sep){var n,prec,s,to_fixed_fix;return null==dec_point&&(dec_point="."),null==thousands_sep&&(thousands_sep=","),number=(number+"").replace(/[^0-9+\-Ee.]/g,""),n=isFinite(+number)?+number:0,prec=isFinite(+decimals)?Math.abs(decimals):0,s="",to_fixed_fix=function(n,prec){var k;return k=Math.pow(10,prec),""+Math.round(n*k)/k},s=prec?to_fixed_fix(n,prec):""+Math.round(n),s=s.split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,thousands_sep)),(s[1]||"").length<prec&&(s[1]=s[1]||"",s[1]+=new Array(prec-s[1].length+1).join("0")),s.join(dec_point)},get_percent:function(amount,total,percision){var count;return"number"==typeof amount&&"number"==typeof total?(percision=percision||2,amount&&total?(count=amount/total,count=100*count,count=parseFloat(this.number_format(count,percision))):amount):!1},set_percent:function(percent,total,percision){var result;return"number"==typeof percent&&"number"==typeof total?(percision=percision||2,percent&&total?result=parseFloat(this.number_format(total/100*percent,percision)):0):!1}}}.call(this),function(){mysli.web.ui.arr=function(){function arr(){this.stack={},this.ids=[]}return arr.prototype.push=function(id,element){return this.stack[id]=element,this.ids.push(id),this.ids.length-1},arr.prototype.push_after=function(after_id,id,element){var index_to;return index_to=this.get_index(after_id)+1,this.stack[id]=element,this.ids.splice(index_to,0,id),index_to},arr.prototype.remove=function(id){return delete this.stack[id],this.ids.splice(this.get_index(id),1)},arr.prototype.get_index=function(id){var ide,_i,_len,_ref;if("function"==typeof this.ids.indexOf)return this.ids.indexOf(id);for(_ref=this.ids,_i=0,_len=_ref.length;_len>_i;_i++)if(ide=_ref[_i],ide===id)return ide},arr.prototype.get_index_from=function(id,step){return id=this.get_index(id),id!==!1&&id>0?id+step:void 0},arr.prototype.get=function(id){return"undefined"!=typeof this.stack[id]?this.stack[id]:!1},arr.prototype.get_from=function(id,step){return id=this.get_index_from(id,step),id!==!1?this.get(this.ids[id]):!1},arr.prototype.count=function(){return this.ids.length},arr.prototype.get_last=function(){return this.stack[this.ids[this.ids.length-1]]},arr.prototype.each=function(callback){var id,r,_i,_len,_ref;for(_ref=this.ids,_i=0,_len=_ref.length;_len>_i;_i++)if(id=_ref[_i],r=callback(id,this.stack[id]),void 0!==r)return r},arr.prototype.each_after=function(id,callback){var i,r;for(i=this.get_index(id);i<this.ids.length;){if(r=callback(i,this.stack[this.ids[i]]),void 0!==r)return r;i++}},arr.prototype.each_before=function(id,callback){var i,r;for(i=0;i<this.get_index(id);){if(r=callback(i,this.stack[this.ids[i]]),void 0!==r)return r;i++}},arr}()}.call(this),function(){mysli.web.ui.arr=function(){function arr(){this.stack={},this.ids=[]}return arr.prototype.push=function(id,element){return this.stack[id]=element,this.ids.push(id),this.ids.length-1},arr.prototype.push_after=function(after_id,id,element){var index_to;return index_to=this.get_index(after_id)+1,this.stack[id]=element,this.ids.splice(index_to,0,id),index_to},arr.prototype.remove=function(id){return delete this.stack[id],this.ids.splice(this.get_index(id),1)},arr.prototype.get_index=function(id){var ide,_i,_len,_ref;if("function"==typeof this.ids.indexOf)return this.ids.indexOf(id);for(_ref=this.ids,_i=0,_len=_ref.length;_len>_i;_i++)if(ide=_ref[_i],ide===id)return ide},arr.prototype.get_index_from=function(id,step){return id=this.get_index(id),id!==!1&&id>0?id+step:void 0},arr.prototype.get=function(id){return"undefined"!=typeof this.stack[id]?this.stack[id]:!1},arr.prototype.get_from=function(id,step){return id=this.get_index_from(id,step),id!==!1?this.get(this.ids[id]):!1},arr.prototype.count=function(){return this.ids.length},arr.prototype.get_last=function(){return this.stack[this.ids[this.ids.length-1]]},arr.prototype.each=function(callback){var id,r,_i,_len,_ref;for(_ref=this.ids,_i=0,_len=_ref.length;_len>_i;_i++)if(id=_ref[_i],r=callback(id,this.stack[id]),void 0!==r)return r},arr.prototype.each_after=function(id,callback){var i,r;for(i=this.get_index(id);i<this.ids.length;){if(r=callback(i,this.stack[this.ids[i]]),void 0!==r)return r;i++}},arr.prototype.each_before=function(id,callback){var i,r;for(i=0;i<this.get_index(id);){if(r=callback(i,this.stack[this.ids[i]]),void 0!==r)return r;i++}},arr}()}.call(this),function(){mysli.web.ui.event=function(){function event(){this.events_counter=0,this.events={}}return event.prototype.trigger=function(event,params){var call,id,_results;if(null==params&&(params=[]),"undefined"==typeof this.events[event])throw new Error("Invalid event id: `"+event+"`");"function"!=typeof params.push&&(params=[params]),params.push(this),_results=[];for(id in this.events[event])if(this.events[event].hasOwnProperty(id)){if(call=this.events[event][id],"function"!=typeof call)throw new Error("Invalid type of callback: `"+id+"`");_results.push(call.apply(this,params))}return _results},event.prototype.connect=function(event,callback){var id,_ref;if(_ref=this.extract_event_name(event),event=_ref[0],id=_ref[1],"undefined"==typeof this.events[event])throw new Error("No such event available: `"+event+"`");return this.events_counter++,id=""+id+event+"--"+this.events_counter,this.events[event][id]=callback,id},event.prototype.disconnect=function(id){var eid,event;if("object"!=typeof id&&"*"===id.substr(0,1)){id+="*";for(event in this.events)for(eid in this.events[event])eid.substr(0,id.length)===id&&delete this.events[event][eid];return!0}return"object"!=typeof id?event=id.split("--",2)[0]:(event=id[0],id=id[1]),"undefined"!=typeof this.events[event]?delete this.events[event][id]:!1},event.prototype.extract_event_name=function(event){var id;return event.indexOf("*")>0?(id=event.split("*",2),event=id[0],id="*"+id[1]+"*"):id="",[event,id]},event}()}.call(this),function(){mysli.web.ui.event=function(){function event(){this.events_counter=0,this.events={}}return event.prototype.trigger=function(event,params){var call,id,_results;if(null==params&&(params=[]),"undefined"==typeof this.events[event])throw new Error("Invalid event id: `"+event+"`");"function"!=typeof params.push&&(params=[params]),params.push(this),_results=[];for(id in this.events[event])if(this.events[event].hasOwnProperty(id)){if(call=this.events[event][id],"function"!=typeof call)throw new Error("Invalid type of callback: `"+id+"`");_results.push(call.apply(this,params))}return _results},event.prototype.connect=function(event,callback){var id,_ref;if(_ref=this.extract_event_name(event),event=_ref[0],id=_ref[1],"undefined"==typeof this.events[event])throw new Error("No such event available: `"+event+"`");return this.events_counter++,id=""+id+event+"--"+this.events_counter,this.events[event][id]=callback,id},event.prototype.disconnect=function(id){var eid,event;if("object"!=typeof id&&"*"===id.substr(0,1)){id+="*";for(event in this.events)for(eid in this.events[event])eid.substr(0,id.length)===id&&delete this.events[event][eid];return!0}return"object"!=typeof id?event=id.split("--",2)[0]:(event=id[0],id=id[1]),"undefined"!=typeof this.events[event]?delete this.events[event][id]:!1},event.prototype.extract_event_name=function(event){var id;return event.indexOf("*")>0?(id=event.split("*",2),event=id[0],id="*"+id[1]+"*"):id="",[event,id]},event}()}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.widget=function(_super){function widget(options){widget.__super__.constructor.apply(this,arguments),this.native_events={click:0,"mouse-enter":0,"mouse-leave":0,"mouse-move":0,"mouse-out":0,"mouse-over":0,"mouse-up":0},this.events={click:{},"mouse-enter":{},"mouse-leave":{},"mouse-move":{},"mouse-out":{},"mouse-over":{},"mouse-up":{},"busy-change":{},"disable-change":{},"position-change":{},"size-change":{},added:{},removed:{},destroyed:{}},this.destroyed=!1,this.elements=[],this.busy=!1,this.id=!1,this.parent=!1,this.options=ui.util.merge_options(options,{disabled:!1})}var disconnect_native,ids_pool,ui;return __extends(widget,_super),ui=mysli.web.ui,ids_pool={},widget.prototype.connect=function(event,callback){var dom_event,id,_,_ref;return id=widget.__super__.connect.call(this,event,callback),_ref=this.extract_event_name(event),event=_ref[0],_=_ref[1],"undefined"!=typeof this.native_events[event]&&(this.native_events[event]++,1===this.native_events[event]&&(dom_event=event.replace("-",""),this.get_element().on(dom_event,this.trigger.bind(this,event)))),id},widget.prototype.disconnect=function(id){var eid,event;if("object"!=typeof id&&"*"===id.substr(0,1)){id+="*";for(event in this.events)for(eid in this.events[event])eid.substr(0,id.length)===id&&(disconnect_native(event,this),widget.__super__.disconnect.call(this,event,id));return!0}return"object"!=typeof id?event=id.split("--",2)[0]:(event=id[0],id=id[1]),"undefined"!=typeof this.events[event]?(disconnect_native(event,this),widget.__super__.disconnect.call(this,event,id)):void 0},widget.prototype.set_busy=function(state){if(state===!0){if(this.busy)return;return this.trigger("busy-change",[state]),this.busy=new ui.overlay(this.get_element()),this.connect("destroyed*widget.overlay",this.busy.destroy.bind(this.busy)),this.connect("position-change*widget.overlay",function(__,position){return this.busy.set_position(position)}),this.connect("size-change*widget.overlay",function(__,size){return this.busy.set_size(size)}),this.busy.set_busy(!0),this.busy.show()}return this.disconnect("*widget.overlay"),this.trigger("busy-change",[state]),this.busy=this.busy.destroy()},widget.prototype.get_busy=function(){return this.busy},widget.prototype.set_disabled=function(state){return this.trigger("disable-change",[state]),this.get_element().prop("disabled",state)},widget.prototype.get_disabled=function(){return this.get_element().prop("disabled")},widget.prototype.set_position=function(position){var element;return element=this.get_element(),this.trigger("position-change",[position,!!element]),element?element.offset(position):void 0},widget.prototype.get_position=function(){return"object"==typeof this.get_element()?this.get_element().offset():void 0},widget.prototype.set_size=function(size){var element;return element=this.get_element(),element&&(size.width&&element.css("width",size.width),size.height&&element.css("height",size.height)),this.trigger("size-change",[size,!!element])},widget.prototype.get_size=function(){var element;return element=this.get_element(),element?{width:element.outerWidth(),height:element.outerHeight()}:void 0},widget.prototype.set_id=function(id){if(this.id)throw new Error("You cannot change ID once it was set: `"+id+"`");if("undefined"!=typeof ids_pool[id])throw new Error("Item with such ID already exists: `"+id+"`");return this.get_element().attr("id",id),this.id=id,ids_pool[id]=this},widget.prototype.get_id=function(){return this.id},widget.prototype.get_element=function(){return this.elements[0]},widget.prototype.set_parent=function(parent){return this.parent="string"==typeof parent?$(parent):parent},widget.prototype.get_parent=function(){return this.parent},widget.prototype.show=function(){if("function"!=typeof this.parent.append)throw new Error("Parent has no function `append`");return this.parent.append(this.get_element())},widget.prototype.destroy=function(){var element,event,_i,_len,_ref;for(this.trigger("destroyed"),_ref=this.elements,_i=0,_len=_ref.length;_len>_i;_i++)element=_ref[_i],element.remove();this.id&&delete ids_pool[this.id];for(event in this.events)this.events[event]={};return this.destroyed=!0,!1},disconnect_native=function(event,context){var dom_event;return"undefined"!=typeof context.native_events[event]&&(context.native_events[event]--,0===context.native_events[event])?(dom_event=event.replace("-",""),context.get_element().off(dom_event)):void 0},widget}(mysli.web.ui.event)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.widget=function(_super){function widget(options){widget.__super__.constructor.apply(this,arguments),this.native_events={click:0,"mouse-enter":0,"mouse-leave":0,"mouse-move":0,"mouse-out":0,"mouse-over":0,"mouse-up":0},this.events={click:{},"mouse-enter":{},"mouse-leave":{},"mouse-move":{},"mouse-out":{},"mouse-over":{},"mouse-up":{},"busy-change":{},"disable-change":{},"position-change":{},"size-change":{},added:{},removed:{},destroyed:{}},this.destroyed=!1,this.elements=[],this.busy=!1,this.id=!1,this.parent=!1,this.options=ui.util.merge_options(options,{disabled:!1})}var disconnect_native,ids_pool,ui;return __extends(widget,_super),ui=mysli.web.ui,ids_pool={},widget.prototype.connect=function(event,callback){var dom_event,id,_,_ref;return id=widget.__super__.connect.call(this,event,callback),_ref=this.extract_event_name(event),event=_ref[0],_=_ref[1],"undefined"!=typeof this.native_events[event]&&(this.native_events[event]++,1===this.native_events[event]&&(dom_event=event.replace("-",""),this.get_element().on(dom_event,this.trigger.bind(this,event)))),id},widget.prototype.disconnect=function(id){var eid,event;if("object"!=typeof id&&"*"===id.substr(0,1)){id+="*";for(event in this.events)for(eid in this.events[event])eid.substr(0,id.length)===id&&(disconnect_native(event,this),widget.__super__.disconnect.call(this,event,id));return!0}return"object"!=typeof id?event=id.split("--",2)[0]:(event=id[0],id=id[1]),"undefined"!=typeof this.events[event]?(disconnect_native(event,this),widget.__super__.disconnect.call(this,event,id)):void 0},widget.prototype.set_busy=function(state){if(state===!0){if(this.busy)return;return this.trigger("busy-change",[state]),this.busy=new ui.overlay(this.get_element()),this.connect("destroyed*widget.overlay",this.busy.destroy.bind(this.busy)),this.connect("position-change*widget.overlay",function(__,position){return this.busy.set_position(position)}),this.connect("size-change*widget.overlay",function(__,size){return this.busy.set_size(size)}),this.busy.set_busy(!0),this.busy.show()}return this.disconnect("*widget.overlay"),this.trigger("busy-change",[state]),this.busy=this.busy.destroy()},widget.prototype.get_busy=function(){return this.busy},widget.prototype.set_disabled=function(state){return this.trigger("disable-change",[state]),this.get_element().prop("disabled",state)},widget.prototype.get_disabled=function(){return this.get_element().prop("disabled")},widget.prototype.set_position=function(position){var element;return element=this.get_element(),this.trigger("position-change",[position,!!element]),element?element.offset(position):void 0},widget.prototype.get_position=function(){return"object"==typeof this.get_element()?this.get_element().offset():void 0},widget.prototype.set_size=function(size){var element;return element=this.get_element(),element&&(size.width&&element.css("width",size.width),size.height&&element.css("height",size.height)),this.trigger("size-change",[size,!!element])},widget.prototype.get_size=function(){var element;return element=this.get_element(),element?{width:element.outerWidth(),height:element.outerHeight()}:void 0},widget.prototype.set_id=function(id){if(this.id)throw new Error("You cannot change ID once it was set: `"+id+"`");if("undefined"!=typeof ids_pool[id])throw new Error("Item with such ID already exists: `"+id+"`");return this.get_element().attr("id",id),this.id=id,ids_pool[id]=this},widget.prototype.get_id=function(){return this.id},widget.prototype.get_element=function(){return this.elements[0]},widget.prototype.set_parent=function(parent){return this.parent="string"==typeof parent?$(parent):parent},widget.prototype.get_parent=function(){return this.parent},widget.prototype.show=function(){if("function"!=typeof this.parent.append)throw new Error("Parent has no function `append`");return this.parent.append(this.get_element())},widget.prototype.destroy=function(){var element,event,_i,_len,_ref;for(this.trigger("destroyed"),_ref=this.elements,_i=0,_len=_ref.length;_len>_i;_i++)element=_ref[_i],element.remove();this.id&&delete ids_pool[this.id];for(event in this.events)this.events[event]={};return this.destroyed=!0,!1},disconnect_native=function(event,context){var dom_event;return"undefined"!=typeof context.native_events[event]&&(context.native_events[event]--,0===context.native_events[event])?(dom_event=event.replace("-",""),context.get_element().off(dom_event)):void 0},widget}(mysli.web.ui.event)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.container=function(_super){function container(){container.__super__.constructor.apply(this,arguments),this.events.add={},this.events.remove={},this.container={icounter:0,master:null,target:null,stack:{},ids:[]}}var ui;return __extends(container,_super),ui=mysli.web.ui,container.prototype.push=function(widget,id){if(null==id&&(id=null),widget.parent=this,widget.trigger("added",[this]),this.trigger("add",[widget]),id||(id=this.get_new_id()),widget.connect("destroyed*container.add",function(_this){return function(){return _this.remove(id)}}(this)),widget.get_element().addClass("contained-widget-"+id),!this.container.target)throw new Error("Target is undefined!");return this.container.target.append(widget.get_element()),this.container.stack[id]=widget,this.container.ids.push(id),widget},container.prototype.push_after=function(after_id,widget,id){var index_to;if(null==id&&(id=null),id||(id=this.get_new_id()),index_to=this.get_index(after_id)+1,widget.parent=this,widget.trigger("added",[this]),this.trigger("add",[widget]),widget.connect("destroyed*container.add",function(_this){return function(){return _this.remove(id)}}(this)),widget.get_element().addClass("contained-widget-"+id),!this.container.target)throw new Error("Target is undefined!");return this.container.target.append(widget.get_element()),this.container.stack[id]=widget,this.container.ids.splice(index_to,0,id),widget},container.prototype.remove=function(id){var widget;return widget=this.get(id),this.trigger("remove",[widget]),widget.destroyed||(widget.trigger("removed",[this]),widget.disconnect("*container.add")),widget.parent=!1,delete this.container.stack[id],this.container.ids.splice(this.get_index(id),1),this.get_element().find(".contained-widget-"+id).remove()},container.prototype.get=function(id){return"undefined"!=typeof this.container.stack[id]?this.container.stack[id]:!1},container.prototype.get_index=function(id){var ide,_i,_len,_ref;if("function"==typeof this.container.ids.indexOf)return this.container.ids.indexOf(id);for(_ref=this.container.ids,_i=0,_len=_ref.length;_len>_i;_i++)if(ide=_ref[_i],ide===id)return ide},container.prototype.get_index_from=function(id,step){return id=this.get_index(id),id!==!1&&id>0?id+step:void 0},container.prototype.get_from=function(id,step){return id=this.get_index_from(id,step),id!==!1?this.get(this.container.ids[id]):!1},container.prototype.count=function(){return this.container.ids.length},container.prototype.get_last=function(){return this.container.stack[this.container.ids[this.container.ids.length-1]]},container.prototype.each=function(callback){var id,r,_i,_len,_ref;for(_ref=this.container.ids,_i=0,_len=_ref.length;_len>_i;_i++)if(id=_ref[_i],r=callback(id,this.container.stack[id]),void 0!==r&&null!==r)return r},container.prototype.each_after=function(id,callback){var i,r;for(i=this.get_index_from(id,1);i<this.container.ids.length;){if(r=callback(i,this.container.stack[this.container.ids[i]]),void 0!==r&&null!==r)return r;i++}},container.prototype.each_before=function(id,callback){var i,r;for(i=0;i<this.get_index(id);){if(r=callback(i,this.container.stack[this.container.ids[i]]),void 0!==r&&null!==r)return r;i++}},container.prototype.get_new_id=function(){return this.container.icounter++,"aid-"+this.container.icounter},container}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.container=function(_super){function container(){container.__super__.constructor.apply(this,arguments),this.events.add={},this.events.remove={},this.container={icounter:0,master:null,target:null,stack:{},ids:[]}}var ui;return __extends(container,_super),ui=mysli.web.ui,container.prototype.push=function(widget,id){if(null==id&&(id=null),widget.parent=this,widget.trigger("added",[this]),this.trigger("add",[widget]),id||(id=this.get_new_id()),widget.connect("destroyed*container.add",function(_this){return function(){return _this.remove(id)}}(this)),widget.get_element().addClass("contained-widget-"+id),!this.container.target)throw new Error("Target is undefined!");return this.container.target.append(widget.get_element()),this.container.stack[id]=widget,this.container.ids.push(id),widget},container.prototype.push_after=function(after_id,widget,id){var index_to;if(null==id&&(id=null),id||(id=this.get_new_id()),index_to=this.get_index(after_id)+1,widget.parent=this,widget.trigger("added",[this]),this.trigger("add",[widget]),widget.connect("destroyed*container.add",function(_this){return function(){return _this.remove(id)}}(this)),widget.get_element().addClass("contained-widget-"+id),!this.container.target)throw new Error("Target is undefined!");return this.container.target.append(widget.get_element()),this.container.stack[id]=widget,this.container.ids.splice(index_to,0,id),widget},container.prototype.remove=function(id){var widget;return widget=this.get(id),this.trigger("remove",[widget]),widget.destroyed||(widget.trigger("removed",[this]),widget.disconnect("*container.add")),widget.parent=!1,delete this.container.stack[id],this.container.ids.splice(this.get_index(id),1),this.get_element().find(".contained-widget-"+id).remove()},container.prototype.get=function(id){return"undefined"!=typeof this.container.stack[id]?this.container.stack[id]:!1},container.prototype.get_index=function(id){var ide,_i,_len,_ref;if("function"==typeof this.container.ids.indexOf)return this.container.ids.indexOf(id);for(_ref=this.container.ids,_i=0,_len=_ref.length;_len>_i;_i++)if(ide=_ref[_i],ide===id)return ide},container.prototype.get_index_from=function(id,step){return id=this.get_index(id),id!==!1&&id>0?id+step:void 0},container.prototype.get_from=function(id,step){return id=this.get_index_from(id,step),id!==!1?this.get(this.container.ids[id]):!1},container.prototype.count=function(){return this.container.ids.length},container.prototype.get_last=function(){return this.container.stack[this.container.ids[this.container.ids.length-1]]},container.prototype.each=function(callback){var id,r,_i,_len,_ref;for(_ref=this.container.ids,_i=0,_len=_ref.length;_len>_i;_i++)if(id=_ref[_i],r=callback(id,this.container.stack[id]),void 0!==r&&null!==r)return r},container.prototype.each_after=function(id,callback){var i,r;for(i=this.get_index_from(id,1);i<this.container.ids.length;){if(r=callback(i,this.container.stack[this.container.ids[i]]),void 0!==r&&null!==r)return r;i++}},container.prototype.each_before=function(id,callback){var i,r;for(i=0;i<this.get_index(id);){if(r=callback(i,this.container.stack[this.container.ids[i]]),void 0!==r&&null!==r)return r;i++}},container.prototype.get_new_id=function(){return this.container.icounter++,"aid-"+this.container.icounter},container}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.button=function(_super){function button(label,options){null==options&&(options={}),"string"==typeof label?options.label=label:options=label,this.options=ui.util.merge_options(options,{label:null,icon:null,icon_position:ui["const"].LEFT,icon_spin:!1,style:ui["const"].STYLE_DEFAULT,style_flat:!1}),button.__super__.constructor.call(this,this.options),this.elements.push($(template)),ui.util.apply_options(this.options,this,{set_label:"label",set_icon:["icon","icon_position","icon_spin"],set_style:["style","style_flat"],set_disabled:"disabled"})}var template,ui;return __extends(button,_super),template='<button class="ui-button ui-widget" />',ui=mysli.web.ui,button.prototype.set_label=function(label){var label_element,method;return label_element=this.get_element().find("span.label"),label?(label_element.length||(label_element=$('<span class="label" />'),method=this.options.icon_position===ui["const"].RIGHT?"prepend":"append",this.get_element()[method](label_element)),label_element.text(label)):void label_element.remove()},button.prototype.get_label=function(){return this.get_element().find("span.label").text()},button.prototype.set_icon=function(icon,position,spin){var icons,method;return null==spin&&(spin=!1),icons=this.get_element().find("i.fa"),icons.remove(),icon?(method=position===ui["const"].RIGHT?"append":"prepend",spin=spin?"fa-spin":"",this.get_element()[method]($('<i class="fa fa-'+icon+" "+spin+'" />'))):void 0},button.prototype.set_style=function(style,flat){var current_style;return null==style&&(style="default"),null==flat&&(flat=!1),current_style="style-"+this.get_style(),this.get_element().removeClass(current_style),flat?this.get_element().addClass("style-flat"):this.get_element().removeClass("style-flat"),this.get_element().addClass(function(){switch(style){case ui["const"].STYLE_DEFAULT:return"style-default";case ui["const"].STYLE_ALT:return"style-alt";case ui["const"].STYLE_PRIMARY:return"style-primary";case ui["const"].STYLE_CONFIRM:return"style-confirm";case ui["const"].STYLE_ATTENTION:return"style-attention";default:throw new Error("Invalid style: `"+style+"`")}}())},button.prototype.get_style=function(){var class_name,classes,_i,_len;for(classes=this.get_element()[0].className.split(" "),_i=0,_len=classes.length;_len>_i;_i++)if(class_name=classes[_i],"style-"===class_name.substr(0,6)&&"style-flat"!==class_name)return class_name.substr(6)},button}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.button=function(_super){function button(label,options){null==options&&(options={}),"string"==typeof label?options.label=label:options=label,this.options=ui.util.merge_options(options,{label:null,icon:null,icon_position:ui["const"].LEFT,icon_spin:!1,style:ui["const"].STYLE_DEFAULT,style_flat:!1}),button.__super__.constructor.call(this,this.options),this.elements.push($(template)),ui.util.apply_options(this.options,this,{set_label:"label",set_icon:["icon","icon_position","icon_spin"],set_style:["style","style_flat"],set_disabled:"disabled"})}var template,ui;return __extends(button,_super),template='<button class="ui-button ui-widget" />',ui=mysli.web.ui,button.prototype.set_label=function(label){var label_element,method;return label_element=this.get_element().find("span.label"),label?(label_element.length||(label_element=$('<span class="label" />'),method=this.options.icon_position===ui["const"].RIGHT?"prepend":"append",this.get_element()[method](label_element)),label_element.text(label)):void label_element.remove()},button.prototype.get_label=function(){return this.get_element().find("span.label").text()},button.prototype.set_icon=function(icon,position,spin){var icons,method;return null==spin&&(spin=!1),icons=this.get_element().find("i.fa"),icons.remove(),icon?(method=position===ui["const"].RIGHT?"append":"prepend",spin=spin?"fa-spin":"",this.get_element()[method]($('<i class="fa fa-'+icon+" "+spin+'" />'))):void 0},button.prototype.set_style=function(style,flat){var current_style;return null==style&&(style="default"),null==flat&&(flat=!1),current_style="style-"+this.get_style(),this.get_element().removeClass(current_style),flat?this.get_element().addClass("style-flat"):this.get_element().removeClass("style-flat"),this.get_element().addClass(function(){switch(style){case ui["const"].STYLE_DEFAULT:return"style-default";case ui["const"].STYLE_ALT:return"style-alt";case ui["const"].STYLE_PRIMARY:return"style-primary";case ui["const"].STYLE_CONFIRM:return"style-confirm";
case ui["const"].STYLE_ATTENTION:return"style-attention";default:throw new Error("Invalid style: `"+style+"`")}}())},button.prototype.get_style=function(){var class_name,classes,_i,_len;for(classes=this.get_element()[0].className.split(" "),_i=0,_len=classes.length;_len>_i;_i++)if(class_name=classes[_i],"style-"===class_name.substr(0,6)&&"style-flat"!==class_name)return class_name.substr(6)},button}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.box=function(_super){function box(options){var row;box.__super__.constructor.apply(this,arguments),this.elements.push($(template)),this.orientation=options.orientation||ui["const"].HORIZONTAL,this.orientation===ui["const"].VERTICAL?(row=$('<div class="row" />'),this.get_element().append(row),this.container.master=this.container.target=row):this.container.master=this.container.target=this.get_element()}var template,ui;return __extends(box,_super),ui=mysli.web.ui,template='<div class="ui-box ui-widget"></div>',box.prototype.push=function(widget,expand){var expanded,method,target,wrapper;return null==expand&&(expand=!1),expanded=expand?"expanded":"collapsed",this.orientation===ui["const"].HORIZONTAL?(wrapper=$('<div class="row '+expanded+'"><div class="cell" /></div>'),target=wrapper.find(".cell")):(wrapper=$('<div class="cell '+expanded+'" />'),target=wrapper),method="append",this.container.master[method](wrapper),this.container.target=target,box.__super__.push.call(this,widget)},box}(mysli.web.ui.container)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.box=function(_super){function box(options){var row;box.__super__.constructor.apply(this,arguments),this.elements.push($(template)),this.orientation=options.orientation||ui["const"].HORIZONTAL,this.orientation===ui["const"].VERTICAL?(row=$('<div class="row" />'),this.get_element().append(row),this.container.master=this.container.target=row):this.container.master=this.container.target=this.get_element()}var template,ui;return __extends(box,_super),ui=mysli.web.ui,template='<div class="ui-box ui-widget"></div>',box.prototype.push=function(widget,expand){var expanded,method,target,wrapper;return null==expand&&(expand=!1),expanded=expand?"expanded":"collapsed",this.orientation===ui["const"].HORIZONTAL?(wrapper=$('<div class="row '+expanded+'"><div class="cell" /></div>'),target=wrapper.find(".cell")):(wrapper=$('<div class="cell '+expanded+'" />'),target=wrapper),method="append",this.container.master[method](wrapper),this.container.target=target,box.__super__.push.call(this,widget)},box}(mysli.web.ui.container)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.panel=function(_super){function panel(id,options){if(null==options&&(options={}),!id)throw new Error("Panel's ID is required");panel.__super__.constructor.call(this,options),this.elements.push($(template)),this.events["away-change"]={},this.events["size-change"]={},this.events["popout-change"]={},this.events["insensitive-change"]={},this.events["min-size-change"]={},this.events["focus-change"]={},this.events["expandable-change"]={},this.connected_panels=[],this.properties=ui.util.merge_options(options,{position:0,offset:0,locked:!1,expandable:!1,expanded_for:0,min_size:!1,size:"default",width:0,away:!1,away_on_blur:!1,away_width:10,insensitive:!1,popout:!1,focused:!1,flippable:!1}),this.closing=!1,this.old_zindex=0,this.old_width=0,this.set_id(id),ui.util.apply_options(this.properties,this,{set_min_size:"min_size",set_size:"size"}),this.connect("click",this.set_focus.bind(this,!0)),this.front=new ui.panel_side("front"),this.get_element().append(this.front.get_element()),this.properties.flippable?(this.back=new ui.panel_side("back"),this.get_element().append(this.back.get_element())):this.back=!1}var dimensions,template,ui;return __extends(panel,_super),ui=mysli.web.ui,template='<div class="ui-panel ui-widget" />',dimensions={tiny:160,small:260,"default":340,big:500,huge:800},panel.prototype.animate=function(callback){return this.closing?void 0:this.get_element().stop(!0,!1).animate({left:this.properties.position+this.properties.offset,width:this.properties.width+this.properties.expanded_for,opacity:1},400,"swing",function(_this){return function(){return"function"==typeof callback?callback.call(_this):void 0}}(this))},panel.prototype.set_size=function(size){var size_diff;if(size_diff=0,"undefined"==typeof dimensions[size])throw new Error("Invalid value for size: `"+size+"`");return this.properties.size=size,size_diff=-(this.properties.width-dimensions[size]),this.properties.width=dimensions[size],this.trigger("size-change",[{width:this.properties.width,height:0,size:size,diff:size_diff}])},panel.prototype.get_size=function(){return{width:this.properties.width,height:0,size:this.properties.size}},panel.prototype.set_away=function(status){var width;if(status){if(this.get_focus()||this.properties.away)return void(this.properties.away_on_blur=!0);this.properties.away=!0,width=-(this.properties.width-this.properties.away_width)}else{if(!this.properties.away)return void(this.away_on_blur=!1);this.properties.away=!1,this.properties.away_on_blur=!1,width=this.properties.width-this.properties.away_width}return this.trigger("away-change",[status,width])},panel.prototype.get_away=function(){return this.properties.away},panel.prototype.set_popout=function(value,size){return null==size&&(size="huge"),value!==this.get_popout?(value?(this.properties.popout=!0,this.set_focus(!0),this.old_zindex=this.get_element().css("z-index"),this.old_width=this.properties.width,this.get_element().css("z-index",10005),this.properties.width=dimensions[size],this.animate):(this.properties.popout=!1,this.get_element().css("z-index",this.old_zindex),this.properties.width=this.old_width),this.trigger("popout-change",[value])):void 0},panel.prototype.get_popout=function(){return this.properties.popout},panel.prototype.set_insensitive=function(value){return value?(this.get_focus()&&this.set_focus(!1),this.properties.insensitive=!0):this.properties.insensitive=!1,this.trigger("insensitive-change",[value])},panel.prototype.get_insensitive=function(){return this.properties.insensitive},panel.prototype.set_min_size=function(size){if(size&&"undefined"==typeof dimensions[size])throw new Error("Not a valid size value: `"+size+"`");return this.properties.min_size=size?dimensions[size]:!1,this.trigger("min-size-change",[size,dimensions[size]])},panel.prototype.get_min_size=function(){return this.properties.min_size},panel.prototype.set_focus=function(value){return value!==this.properties.focused?(value?(this.properties.focused=!0,this.get_element().addClass("focused"),this.properties.away&&(this.set_away(!1),this.properties.away_on_blur=!0)):(this.properties.focused=!1,this.get_element().removeClass("focused"),this.properties.away_on_blur&&this.set_away(!0)),this.trigger("focus-change",[value])):void 0},panel.prototype.get_focus=function(){return this.properties.focused},panel.prototype.set_expandable=function(value){return this.properties.expandable=value,this.trigger("expandable-change",[value])},panel.prototype.get_expandable=function(){return this.properties.expandable},panel.prototype.destroy=function(){return this.locked?void 0:(this.insensitive=!0,this.closing=!0,this.get_element().stop(!0,!1).animate({left:this.properties.position+this.properties.offset-(this.get_size().width+this.properties.expanded_for)-10,opacity:0},400,"swing",function(_this){return function(){return panel.__super__.destroy.apply(_this,arguments)}}(this)))},panel}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.panel=function(_super){function panel(id,options){if(null==options&&(options={}),!id)throw new Error("Panel's ID is required");panel.__super__.constructor.call(this,options),this.elements.push($(template)),this.events["away-change"]={},this.events["size-change"]={},this.events["popout-change"]={},this.events["insensitive-change"]={},this.events["min-size-change"]={},this.events["focus-change"]={},this.events["expandable-change"]={},this.connected_panels=[],this.properties=ui.util.merge_options(options,{position:0,offset:0,locked:!1,expandable:!1,expanded_for:0,min_size:!1,size:"default",width:0,away:!1,away_on_blur:!1,away_width:10,insensitive:!1,popout:!1,focused:!1,flippable:!1}),this.closing=!1,this.old_zindex=0,this.old_width=0,this.set_id(id),ui.util.apply_options(this.properties,this,{set_min_size:"min_size",set_size:"size"}),this.connect("click",this.set_focus.bind(this,!0)),this.front=new ui.panel_side("front"),this.get_element().append(this.front.get_element()),this.properties.flippable?(this.back=new ui.panel_side("back"),this.get_element().append(this.back.get_element())):this.back=!1}var dimensions,template,ui;return __extends(panel,_super),ui=mysli.web.ui,template='<div class="ui-panel ui-widget" />',dimensions={tiny:160,small:260,"default":340,big:500,huge:800},panel.prototype.animate=function(callback){return this.closing?void 0:this.get_element().stop(!0,!1).animate({left:this.properties.position+this.properties.offset,width:this.properties.width+this.properties.expanded_for,opacity:1},400,"swing",function(_this){return function(){return"function"==typeof callback?callback.call(_this):void 0}}(this))},panel.prototype.set_size=function(size){var size_diff;if(size_diff=0,"undefined"==typeof dimensions[size])throw new Error("Invalid value for size: `"+size+"`");return this.properties.size=size,size_diff=-(this.properties.width-dimensions[size]),this.properties.width=dimensions[size],this.trigger("size-change",[{width:this.properties.width,height:0,size:size,diff:size_diff}])},panel.prototype.get_size=function(){return{width:this.properties.width,height:0,size:this.properties.size}},panel.prototype.set_away=function(status){var width;if(status){if(this.get_focus()||this.properties.away)return void(this.properties.away_on_blur=!0);this.properties.away=!0,width=-(this.properties.width-this.properties.away_width)}else{if(!this.properties.away)return void(this.away_on_blur=!1);this.properties.away=!1,this.properties.away_on_blur=!1,width=this.properties.width-this.properties.away_width}return this.trigger("away-change",[status,width])},panel.prototype.get_away=function(){return this.properties.away},panel.prototype.set_popout=function(value,size){return null==size&&(size="huge"),value!==this.get_popout?(value?(this.properties.popout=!0,this.set_focus(!0),this.old_zindex=this.get_element().css("z-index"),this.old_width=this.properties.width,this.get_element().css("z-index",10005),this.properties.width=dimensions[size],this.animate):(this.properties.popout=!1,this.get_element().css("z-index",this.old_zindex),this.properties.width=this.old_width),this.trigger("popout-change",[value])):void 0},panel.prototype.get_popout=function(){return this.properties.popout},panel.prototype.set_insensitive=function(value){return value?(this.get_focus()&&this.set_focus(!1),this.properties.insensitive=!0):this.properties.insensitive=!1,this.trigger("insensitive-change",[value])},panel.prototype.get_insensitive=function(){return this.properties.insensitive},panel.prototype.set_min_size=function(size){if(size&&"undefined"==typeof dimensions[size])throw new Error("Not a valid size value: `"+size+"`");return this.properties.min_size=size?dimensions[size]:!1,this.trigger("min-size-change",[size,dimensions[size]])},panel.prototype.get_min_size=function(){return this.properties.min_size},panel.prototype.set_focus=function(value){return value!==this.properties.focused?(value?(this.properties.focused=!0,this.get_element().addClass("focused"),this.properties.away&&(this.set_away(!1),this.properties.away_on_blur=!0)):(this.properties.focused=!1,this.get_element().removeClass("focused"),this.properties.away_on_blur&&this.set_away(!0)),this.trigger("focus-change",[value])):void 0},panel.prototype.get_focus=function(){return this.properties.focused},panel.prototype.set_expandable=function(value){return this.properties.expandable=value,this.trigger("expandable-change",[value])},panel.prototype.get_expandable=function(){return this.properties.expandable},panel.prototype.destroy=function(){return this.locked?void 0:(this.insensitive=!0,this.closing=!0,this.get_element().stop(!0,!1).animate({left:this.properties.position+this.properties.offset-(this.get_size().width+this.properties.expanded_for)-10,opacity:0},400,"swing",function(_this){return function(){return panel.__super__.destroy.apply(_this,arguments)}}(this)))},panel}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.panel_container=function(_super){function panel_container(){panel_container.__super__.constructor.apply(this,arguments),this.elements.push($(template)),this.container.master=this.container.target=this.elements[0],this.sum_size=0,this.expandable_count=0,this.active_id=!1,this.offseted=0,this.container_width=0,this.set_parent("body"),this.set_resize_with_window(!0),this.set_size_from_dom_element(window)}var template,util;return __extends(panel_container,_super),util=mysli.web.ui.util,template='<div class="ui-widget ui-panel-container" />',panel_container.prototype.update_sum=function(value,modify_before_id){return null==modify_before_id&&(modify_before_id=!1),this.sum_size=this.sum_size+value,modify_before_id?this.each_after(modify_before_id,function(index,panel){panel.get_element().css("z-index",1e4-index),panel.properties.position=panel.properties.position+value,panel.animate()}):void 0},panel_container.prototype.update_view=function(){var active_panel,offset_so_far,overflow,overflow_part,overflow_percent,panel_calculated,screen_left;if(this.active_id)return active_panel=this.get(this.active_id),overflow=this.container_width-this.sum_size,overflow_part=this.expandable_count>0?Math.ceil(overflow/this.expandable_count):0,screen_left=this.container_width-active_panel.get_size().width,overflow_percent=100-util.get_percent(screen_left,this.sum_size-active_panel.get_size().width),offset_so_far=0,panel_calculated=0,0>=overflow_part&&(overflow_part=overflow),overflow>0?(overflow_percent=0,this.offseted=!1):this.offseted=!0,this.each(function(index,panel){var diff;if(panel.get_away()&&!panel.get_focus())return panel.properties.expanded_for=0,panel.properties.offset=-(panel.get_size().width-panel.properties.away_width+offset_so_far),panel.animate(),void(offset_so_far=offset_so_far+panel.get_size().width-panel.properties.away_width);if(panel.properties.expandable){if(overflow>0)return panel.properties.offset=-offset_so_far,panel.properties.expanded_for=overflow_part,panel.animate(),void(offset_so_far+=-overflow_part);panel.properties.expanded_for=0,panel.animate()}return panel.get_focus()?(panel.properties.expanded_for=0,panel.properties.offset=-offset_so_far,void panel.animate()):(panel_calculated=util.set_percent(overflow_percent,panel.get_size().width),panel.properties.min_size&&panel.get_size().width+panel.properties.expanded_for>panel.properties.min_size?panel.properties.min_size>panel.get_size().width-panel_calculated?(diff=panel_calculated-(panel.get_size().width-panel.properties.min_size),panel.properties.expanded_for=-diff,panel.properties.offset=-(panel_calculated-diff+offset_so_far),panel.animate(),void(offset_so_far+=panel_calculated)):(panel.properties.expanded_for=-panel_calculated,panel.properties.offset=-offset_so_far,panel.animate(),void(offset_so_far+=panel_calculated)):(panel.properties.expanded_for=0,panel.properties.offset=-(panel_calculated+offset_so_far),panel.animate(),void(offset_so_far+=panel_calculated)))})},panel_container.prototype.push=function(panel){return panel_container.__super__.push.call(this,panel,panel.get_id()),this.push_after(!1,panel)},panel_container.prototype.push_after=function(after_id,panel){var index,size;if(!panel instanceof mysli.web.ui.panel)throw new Error("An object must be instance of `mysli.web.ui.panel`");return after_id?(size=this.get(after_id).get_size().width,this.each_before(after_id,function(index,ipanel){ipanel.get_element().css("z-index",1e4-index),size+=ipanel.get_size().width}),panel.properties.position=size):panel.properties.position=this.sum_size,this.update_sum(panel.get_size().width),panel.get_element().css({opacity:0,left:panel.properties.position+panel.properties.offset-(panel.get_size().width+panel.properties.expanded_for)}),after_id&&(panel_container.__super__.push_after.call(this,after_id,panel,panel.get_id()),panel.get_id()!==this.get_last().get_id()&&this.each_after(panel.get_id(),function(index,ipanel){ipanel.get_element().css("z-index",1e4-index),ipanel.properties.position=ipanel.properties.position+panel.get_size().width,ipanel.animate()})),index=this.get_index(panel.get_id()),panel.get_element().css("z-index",1e4-index),panel.connect("focus-change",this.switch_focus.bind(this)),panel.set_focus(!0),panel.get_expandable()?this.expandable_count++:void 0},panel_container.prototype.remove=function(id){var new_panel,panel,width;return panel=this.get(id),width=panel.get_size().width,panel.get_expandable()&&this.expandable_count--,this.update_sum(-width,id),id===this.active_id?(this.active_panel=!1,new_panel=this.get_from(id,-1),new_panel.set_focus(!0)):this.update_view(),panel_container.__super__.remove.call(this,id)},panel_container.prototype.set_resize_with_window=function(status,timeout){return null==timeout&&(timeout=500),status?$(window).on("resize",function(_this){return function(){return _this.resize_timer&&clearTimeout(_this.resize_timer),_this.resize_timer=setTimeout(_this.set_size_from_dom_element.bind(_this,window),timeout)}}(this)):this.resize_timer?clearTimeout(this.resize_timer):void 0},panel_container.prototype.set_size_from_dom_element=function(selector){var height,width;return width=$(selector).outerWidth(),height=$(selector).outerHeight(),this.set_size({width:width,height:height}),this.container_width=width,this.update_view()},panel_container.prototype.switch_focus=function(status,panel){return status===!0?(this.active_id!==!1&&this.get(this.active_id).set_focus(!1),this.active_id=panel.get_id(),this.update_view()):void 0},panel_container}(mysli.web.ui.container)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.panel_container=function(_super){function panel_container(){panel_container.__super__.constructor.apply(this,arguments),this.elements.push($(template)),this.container.master=this.container.target=this.elements[0],this.sum_size=0,this.expandable_count=0,this.active_id=!1,this.offseted=0,this.container_width=0,this.set_parent("body"),this.set_resize_with_window(!0),this.set_size_from_dom_element(window)}var template,util;return __extends(panel_container,_super),util=mysli.web.ui.util,template='<div class="ui-widget ui-panel-container" />',panel_container.prototype.update_sum=function(value,modify_before_id){return null==modify_before_id&&(modify_before_id=!1),this.sum_size=this.sum_size+value,modify_before_id?this.each_after(modify_before_id,function(index,panel){panel.get_element().css("z-index",1e4-index),panel.properties.position=panel.properties.position+value,panel.animate()}):void 0},panel_container.prototype.update_view=function(){var active_panel,offset_so_far,overflow,overflow_part,overflow_percent,panel_calculated,screen_left;if(this.active_id)return active_panel=this.get(this.active_id),overflow=this.container_width-this.sum_size,overflow_part=this.expandable_count>0?Math.ceil(overflow/this.expandable_count):0,screen_left=this.container_width-active_panel.get_size().width,overflow_percent=100-util.get_percent(screen_left,this.sum_size-active_panel.get_size().width),offset_so_far=0,panel_calculated=0,0>=overflow_part&&(overflow_part=overflow),overflow>0?(overflow_percent=0,this.offseted=!1):this.offseted=!0,this.each(function(index,panel){var diff;if(panel.get_away()&&!panel.get_focus())return panel.properties.expanded_for=0,panel.properties.offset=-(panel.get_size().width-panel.properties.away_width+offset_so_far),panel.animate(),void(offset_so_far=offset_so_far+panel.get_size().width-panel.properties.away_width);if(panel.properties.expandable){if(overflow>0)return panel.properties.offset=-offset_so_far,panel.properties.expanded_for=overflow_part,panel.animate(),void(offset_so_far+=-overflow_part);panel.properties.expanded_for=0,panel.animate()}return panel.get_focus()?(panel.properties.expanded_for=0,panel.properties.offset=-offset_so_far,void panel.animate()):(panel_calculated=util.set_percent(overflow_percent,panel.get_size().width),panel.properties.min_size&&panel.get_size().width+panel.properties.expanded_for>panel.properties.min_size?panel.properties.min_size>panel.get_size().width-panel_calculated?(diff=panel_calculated-(panel.get_size().width-panel.properties.min_size),panel.properties.expanded_for=-diff,panel.properties.offset=-(panel_calculated-diff+offset_so_far),panel.animate(),void(offset_so_far+=panel_calculated)):(panel.properties.expanded_for=-panel_calculated,panel.properties.offset=-offset_so_far,panel.animate(),void(offset_so_far+=panel_calculated)):(panel.properties.expanded_for=0,panel.properties.offset=-(panel_calculated+offset_so_far),panel.animate(),void(offset_so_far+=panel_calculated)))})},panel_container.prototype.push=function(panel){return panel_container.__super__.push.call(this,panel,panel.get_id()),this.push_after(!1,panel)},panel_container.prototype.push_after=function(after_id,panel){var index,size;if(!panel instanceof mysli.web.ui.panel)throw new Error("An object must be instance of `mysli.web.ui.panel`");return after_id?(size=this.get(after_id).get_size().width,this.each_before(after_id,function(index,ipanel){ipanel.get_element().css("z-index",1e4-index),size+=ipanel.get_size().width}),panel.properties.position=size):panel.properties.position=this.sum_size,this.update_sum(panel.get_size().width),panel.get_element().css({opacity:0,left:panel.properties.position+panel.properties.offset-(panel.get_size().width+panel.properties.expanded_for)}),after_id&&(panel_container.__super__.push_after.call(this,after_id,panel,panel.get_id()),panel.get_id()!==this.get_last().get_id()&&this.each_after(panel.get_id(),function(index,ipanel){ipanel.get_element().css("z-index",1e4-index),ipanel.properties.position=ipanel.properties.position+panel.get_size().width,ipanel.animate()})),index=this.get_index(panel.get_id()),panel.get_element().css("z-index",1e4-index),panel.connect("focus-change",this.switch_focus.bind(this)),panel.set_focus(!0),panel.get_expandable()?this.expandable_count++:void 0},panel_container.prototype.remove=function(id){var new_panel,panel,width;return panel=this.get(id),width=panel.get_size().width,panel.get_expandable()&&this.expandable_count--,this.update_sum(-width,id),id===this.active_id?(this.active_panel=!1,new_panel=this.get_from(id,-1),new_panel.set_focus(!0)):this.update_view(),panel_container.__super__.remove.call(this,id)},panel_container.prototype.set_resize_with_window=function(status,timeout){return null==timeout&&(timeout=500),status?$(window).on("resize",function(_this){return function(){return _this.resize_timer&&clearTimeout(_this.resize_timer),_this.resize_timer=setTimeout(_this.set_size_from_dom_element.bind(_this,window),timeout)}}(this)):this.resize_timer?clearTimeout(this.resize_timer):void 0},panel_container.prototype.set_size_from_dom_element=function(selector){var height,width;return width=$(selector).outerWidth(),height=$(selector).outerHeight(),this.set_size({width:width,height:height}),this.container_width=width,this.update_view()},panel_container.prototype.switch_focus=function(status,panel){return status===!0?(this.active_id!==!1&&this.get(this.active_id).set_focus(!1),this.active_id=panel.get_id(),this.update_view()):void 0},panel_container}(mysli.web.ui.container)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.panel_side=function(_super){function panel_side(id,options){null==id&&(id="front"),this.options=ui.util.merge_options(options,{style:ui["const"].STYLE_DEFAULT}),panel_side.__super__.constructor.call(this,this.options),this.elements.push($(template)),this.container.master=this.container.target=this.elements[0],this.elements[0].addClass("ui-panel-side-type-"+id),ui.util.apply_options(this.options,this,{set_style:["style"]})}var template,ui;return __extends(panel_side,_super),template='<div class="ui-widget ui-panel-container ui-panel-side" />',ui=mysli.web.ui,panel_side.prototype.set_style=function(style){var current_style;return null==style&&(style="default"),current_style="style-"+this.get_style(),this.get_element().removeClass(current_style),this.get_element().addClass(function(){switch(style){case ui["const"].STYLE_DEFAULT:return"style-default";case ui["const"].STYLE_ALT:return"style-alt";default:throw new Error("Invalid style: `"+style+"`")}}())},panel_side.prototype.get_style=function(){var class_name,classes,_i,_len;for(classes=this.get_element()[0].className.split(" "),_i=0,_len=classes.length;_len>_i;_i++)if(class_name=classes[_i],"style-"===class_name.substr(0,6))return class_name.substr(6)},panel_side}(mysli.web.ui.container)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.panel_side=function(_super){function panel_side(id,options){null==id&&(id="front"),this.options=ui.util.merge_options(options,{style:ui["const"].STYLE_DEFAULT}),panel_side.__super__.constructor.call(this,this.options),this.elements.push($(template)),this.container.master=this.container.target=this.elements[0],this.elements[0].addClass("ui-panel-side-type-"+id),ui.util.apply_options(this.options,this,{set_style:["style"]})}var template,ui;return __extends(panel_side,_super),template='<div class="ui-widget ui-panel-container ui-panel-side" />',ui=mysli.web.ui,panel_side.prototype.set_style=function(style){var current_style;return null==style&&(style="default"),current_style="style-"+this.get_style(),this.get_element().removeClass(current_style),this.get_element().addClass(function(){switch(style){case ui["const"].STYLE_DEFAULT:return"style-default";case ui["const"].STYLE_ALT:return"style-alt";default:throw new Error("Invalid style: `"+style+"`")}}())},panel_side.prototype.get_style=function(){var class_name,classes,_i,_len;for(classes=this.get_element()[0].className.split(" "),_i=0,_len=classes.length;_len>_i;_i++)if(class_name=classes[_i],"style-"===class_name.substr(0,6))return class_name.substr(6)},panel_side}(mysli.web.ui.container)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.html=function(_super){function html(content){null==content&&(content=null),html.__super__.constructor.apply(this,arguments),this.elements.push($(template)),content&&this.push(content)}var template,ui;return __extends(html,_super),ui=mysli.web.ui,template='<div class="ui-html ui-widget"></div>',html.prototype.push=function(content){return this.get_element().append(content)},html}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.html=function(_super){function html(content){null==content&&(content=null),html.__super__.constructor.apply(this,arguments),this.elements.push($(template)),content&&this.push(content)}var template,ui;return __extends(html,_super),ui=mysli.web.ui,template='<div class="ui-html ui-widget"></div>',html.prototype.push=function(content){return this.get_element().append(content)},html}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.titlebar=function(_super){function titlebar(options){null==options&&(options={}),options.orientation=ui["const"].VERTICAL,this.options=ui.util.merge_options(options,{style:ui["const"].STYLE_DEFAULT}),titlebar.__super__.constructor.call(this,options),this.get_element().addClass("ui-titlebar"),ui.util.apply_options(this.options,this,{set_style:["style"]})}var ui;return __extends(titlebar,_super),ui=mysli.web.ui,titlebar.prototype.set_style=function(style){return"flat"===style?this.get_element().addClass("style-flat"):this.get_element().removeClass("style-flat")},titlebar.prototype.get_style=function(){var class_name,classes,_i,_len;for(classes=this.get_element()[0].className.split(" "),_i=0,_len=classes.length;_len>_i;_i++)if(class_name=classes[_i],"style-"===class_name.substr(0,6))return class_name.substr(6)},titlebar}(mysli.web.ui.box)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.titlebar=function(_super){function titlebar(options){null==options&&(options={}),options.orientation=ui["const"].VERTICAL,this.options=ui.util.merge_options(options,{style:ui["const"].STYLE_DEFAULT}),titlebar.__super__.constructor.call(this,options),this.get_element().addClass("ui-titlebar"),ui.util.apply_options(this.options,this,{set_style:["style"]})}var ui;return __extends(titlebar,_super),ui=mysli.web.ui,titlebar.prototype.set_style=function(style){return"flat"===style?this.get_element().addClass("style-flat"):this.get_element().removeClass("style-flat")},titlebar.prototype.get_style=function(){var class_name,classes,_i,_len;
for(classes=this.get_element()[0].className.split(" "),_i=0,_len=classes.length;_len>_i;_i++)if(class_name=classes[_i],"style-"===class_name.substr(0,6))return class_name.substr(6)},titlebar}(mysli.web.ui.box)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.label=function(_super){function label(text,options){null==options&&(options={}),"string"==typeof text?options.text=text:options=text,this.options=ui.util.merge_options(options,{text:null,for_id:null}),label.__super__.constructor.apply(this,arguments),this.elements.push($(template)),ui.util.apply_options(this.options,this,{set_for_id:"for_id",set_text:"text"})}var template,ui;return __extends(label,_super),ui=mysli.web.ui,template='<label class="ui-widget ui-label" />',label.prototype.set_for_id=function(id){return this.options.for_id=id,this.get_element().attr("for",id)},label.prototype.get_for_id=function(){return this.options.for_id},label.prototype.set_text=function(text){return this.options.text=text,this.get_element().text(text)},label.prototype.get_text=function(){return this.options.text},label}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.label=function(_super){function label(text,options){null==options&&(options={}),"string"==typeof text?options.text=text:options=text,this.options=ui.util.merge_options(options,{text:null,for_id:null}),label.__super__.constructor.apply(this,arguments),this.elements.push($(template)),ui.util.apply_options(this.options,this,{set_for_id:"for_id",set_text:"text"})}var template,ui;return __extends(label,_super),ui=mysli.web.ui,template='<label class="ui-widget ui-label" />',label.prototype.set_for_id=function(id){return this.options.for_id=id,this.get_element().attr("for",id)},label.prototype.get_for_id=function(){return this.options.for_id},label.prototype.set_text=function(text){return this.options.text=text,this.get_element().text(text)},label.prototype.get_text=function(){return this.options.text},label}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.title=function(_super){function title(text,options){null==options&&(options={}),"string"==typeof text?options.text=text:options=text,this.options=ui.util.merge_options(options,{text:null,level:1}),title.__super__.constructor.call(this,this.options),this.elements.push($(template)),ui.util.apply_options(this.options,this,{set_level:"level",set_text:"text"})}var template,ui;return __extends(title,_super),ui=mysli.web.ui,template='<span class="ui-widget ui-title" />',title.prototype.set_level=function(level){return this.options.level=level,this.get_element().html($("<h"+level+"/>")),this.set_text(this.options.text)},title.prototype.get_level=function(){return this.options.for_id},title.prototype.set_text=function(text){return this.options.text=text,this.get_element().find(":first-child").text(text)},title.prototype.get_text=function(){return this.options.text},title}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.title=function(_super){function title(text,options){null==options&&(options={}),"string"==typeof text?options.text=text:options=text,this.options=ui.util.merge_options(options,{text:null,level:1}),title.__super__.constructor.call(this,this.options),this.elements.push($(template)),ui.util.apply_options(this.options,this,{set_level:"level",set_text:"text"})}var template,ui;return __extends(title,_super),ui=mysli.web.ui,template='<span class="ui-widget ui-title" />',title.prototype.set_level=function(level){return this.options.level=level,this.get_element().html($("<h"+level+"/>")),this.set_text(this.options.text)},title.prototype.get_level=function(){return this.options.for_id},title.prototype.set_text=function(text){return this.options.text=text,this.get_element().find(":first-child").text(text)},title.prototype.get_text=function(){return this.options.text},title}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.overlay=function(_super){function overlay(caller){var parent;overlay.__super__.constructor.apply(this,arguments),this.elements.push($(template)),"parent"in caller&&(parent=caller.parent(),parent.prepend(this.get_element()))}var template,ui;return __extends(overlay,_super),ui=mysli.web.ui,template='<div class="ui-overlay ui-widget"><div class="ui-overlay-busy"><i class="fa fa-cog fa-spin"></i></div></div>',overlay.prototype.set_busy=function(state){return state?this.get_element().addClass("state-busy"):this.get_element().removeClass("state-busy")},overlay.prototype.get_busy=function(){return this.get_element().hasClass("state-busy")},overlay.prototype.show=function(){return this.get_element().fadeIn()},overlay.prototype.hide=function(){return this.get_element().fadeOut(400)},overlay.prototype.destroy=function(){return this.get_element().fadeOut(400,function(_this){return function(){return overlay.__super__.destroy.apply(_this,arguments)}}(this))},overlay}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.overlay=function(_super){function overlay(caller){var parent;overlay.__super__.constructor.apply(this,arguments),this.elements.push($(template)),"parent"in caller&&(parent=caller.parent(),parent.prepend(this.get_element()))}var template,ui;return __extends(overlay,_super),ui=mysli.web.ui,template='<div class="ui-overlay ui-widget"><div class="ui-overlay-busy"><i class="fa fa-cog fa-spin"></i></div></div>',overlay.prototype.set_busy=function(state){return state?this.get_element().addClass("state-busy"):this.get_element().removeClass("state-busy")},overlay.prototype.get_busy=function(){return this.get_element().hasClass("state-busy")},overlay.prototype.show=function(){return this.get_element().fadeIn()},overlay.prototype.hide=function(){return this.get_element().fadeOut(400)},overlay.prototype.destroy=function(){return this.get_element().fadeOut(400,function(_this){return function(){return overlay.__super__.destroy.apply(_this,arguments)}}(this))},overlay}(mysli.web.ui.widget)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.navigation=function(_super){function navigation(items){null==items&&(items={}),navigation.__super__.constructor.apply(this,arguments),this.elements.push($(template)),this.container.master=this.container.target=this.elements[0],this.push_multiple(items),this.events.action={},this.get_element().on("click",".ui-navigation-item > a.action",function(_this){return function(e){var id;return e.stopPropagation(),id=e.currentTarget.id.substr(6),_this.trigger("action",id)}}(this))}var template,ui;return __extends(navigation,_super),template='<div class="ui-widget ui-navigation" />',ui=mysli.web.ui,navigation.prototype.push_multiple=function(items){var id,item,_results;_results=[];for(id in items)item=items[id],_results.push(this.push(id,item));return _results},navigation.prototype.push=function(id,element){var item;return"string"==typeof element&&(element={label:element}),item=new ui.widget,item.elements.push($('<div class="ui-navigation-item" />')),item.set_id("mnip--"+id),item.get_element().append('<a href="#" class="action" id="mnic--'+id+'"><span></span></a>').find("a span").text(element.label),navigation.__super__.push.call(this,item,id)},navigation.prototype.set_style=function(style){var current_style;return null==style&&(style="default"),current_style="style-"+this.get_style(),this.get_element().removeClass(current_style),this.get_element().addClass(function(){switch(style){case ui["const"].STYLE_DEFAULT:return"style-default";case ui["const"].STYLE_ALT:return"style-alt";default:throw new Error("Invalid style: `"+style+"`")}}())},navigation.prototype.get_style=function(){var class_name,classes,_i,_len;for(classes=this.get_element()[0].className.split(" "),_i=0,_len=classes.length;_len>_i;_i++)if(class_name=classes[_i],"style-"===class_name.substr(0,6))return class_name.substr(6)},navigation}(mysli.web.ui.container)}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};mysli.web.ui.navigation=function(_super){function navigation(items){null==items&&(items={}),navigation.__super__.constructor.apply(this,arguments),this.elements.push($(template)),this.container.master=this.container.target=this.elements[0],this.push_multiple(items),this.events.action={},this.get_element().on("click",".ui-navigation-item > a.action",function(_this){return function(e){var id;return e.stopPropagation(),id=e.currentTarget.id.substr(6),_this.trigger("action",id)}}(this))}var template,ui;return __extends(navigation,_super),template='<div class="ui-widget ui-navigation" />',ui=mysli.web.ui,navigation.prototype.push_multiple=function(items){var id,item,_results;_results=[];for(id in items)item=items[id],_results.push(this.push(id,item));return _results},navigation.prototype.push=function(id,element){var item;return"string"==typeof element&&(element={label:element}),item=new ui.widget,item.elements.push($('<div class="ui-navigation-item" />')),item.set_id("mnip--"+id),item.get_element().append('<a href="#" class="action" id="mnic--'+id+'"><span></span></a>').find("a span").text(element.label),navigation.__super__.push.call(this,item,id)},navigation.prototype.set_style=function(style){var current_style;return null==style&&(style="default"),current_style="style-"+this.get_style(),this.get_element().removeClass(current_style),this.get_element().addClass(function(){switch(style){case ui["const"].STYLE_DEFAULT:return"style-default";case ui["const"].STYLE_ALT:return"style-alt";default:throw new Error("Invalid style: `"+style+"`")}}())},navigation.prototype.get_style=function(){var class_name,classes,_i,_len;for(classes=this.get_element()[0].className.split(" "),_i=0,_len=classes.length;_len>_i;_i++)if(class_name=classes[_i],"style-"===class_name.substr(0,6))return class_name.substr(6)},navigation}(mysli.web.ui.container)}.call(this);
