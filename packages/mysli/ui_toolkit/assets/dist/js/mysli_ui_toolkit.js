MU={},function($,MU){var Button=function(element){this.$element=$(element),this.$label=this.$element.find("span"),this.$label.length||(this.$element.text("<span>"+this.$element.text()+"</span>"),this.$label=this.$element.find("span")),this.busy_org={content:"",disabled:null}};Button.prototype={constructor:Button,element:function(){return this.$element},on:function(evnt,call){return this.$element.on(evnt,call)},off:function(evnt){return this.$element.off(evnt)},disabled:function(state){return"undefined"==typeof state?(state=this.$element.attr("disabled"),"true"===state||"disabled"===state):void(state?this.$element.attr("disabled",!0):this.$element.removeAttr("disabled"))},pressed:function(state){return"undefined"==typeof state?this.$element.hasClass("pressed"):void(state?this.$element.addClass("pressed"):this.$element.removeClass("pressed"))},style:function(variant){var classes="alt primary attention";if("undefined"!=typeof variant)this.$element.removeClass(classes),"default"!==variant&&this.$element.addClass(variant);else for(var i=classes.length-1;i>=0;i--)if(this.$element.hasClass(classes[i]))return classes[i]},label:function(text){return"undefined"==typeof text?this.$label.text():void this.$label.text(text)},busy:function(state,label){if("undefined"==typeof state)return this.$element.hasClass("busy");if(state){if(this.busy())return;this.$element.addClass("busy"),this.busy_org.content=this.$element.html(),this.busy_org.disabled=this.disabled(),this.$element.html(" "+(label?label:this.label())),this.icon("spinner","left",!0),this.disabled(!0)}else{if(!this.busy())return;this.$element.removeClass("busy"),this.$element.html(this.busy_org.content),this.disabled(this.busy_org.disabled)}},icon:function(name,position,spin){var icon=this.$element.find("i");return"undefined"==typeof name?icon.length?icon.attr("class").match(/fa-([a-z\-]+)/)[1]:!1:(icon.remove(),void(name&&this.$element["right"===position?"append":"prepend"]("<i></i>").find("i").removeClass().addClass("fa fa-"+name+(spin?" fa-spin":""))))}},MU.Button=Button}(Zepto,MU),function($,MU){function get_geometery(parent,padding){return{top:parent.offset().top-padding,left:parent.offset().left-padding,width:parent.width()+2*padding,height:parent.height()+2*padding}}var count=0,Overlay=function(parent,options){this.options=$.extend({},{loading:!1,text:null,padding:0,can_close:!1,on_click:!1,id:null,classes:[]},options),this.$element=$('<div class="overlay" />'),parent?this.$parent=$(parent):(this.options.classes.push("expanded"),this.$parent=!1),this.options.text&&this.$element.append("<div class=text>"+this.options.text+"</div>"),this.options.loading&&(this.options.classes.push("loading"),this.$element.append('<i class="fa spinner fa-spinner fa-spin"></i>')),this.options.id||(this.options.id="mu_overlay_"+count),this.$element.attr("id",this.options.id),this.options.classes.length&&this.$element.addClass(this.options.classes.join(" ")),this.is_visible=!1,this.is_appended=!1,count+=1};Overlay.prototype={constructor:Overlay,on_click:function(callback){return"function"==typeof callback?this.$element.on("click.callback",callback):this.$element.unbind("click.callback"),this},update:function(animated,geometry){!geometry&&this.$parent&&(geometry=get_geometery(this.$parent,this.options.padding)),"object"==typeof geometry&&this.$element[animated?"animate":"css"]({top:geometry.top,left:geometry.left,width:geometry.width,height:geometry.height})},show:function(geometry){var _this=this;(!this.$parent||this.$parent.is(":visible"))&&(this.is_visible||(!geometry&&this.$parent&&(geometry=get_geometery(this.$parent,this.options.padding)),"object"==typeof geometry&&this.$element.css({display:"none",top:geometry.top,left:geometry.left,width:geometry.width,height:geometry.height,position:"absolute"}),this.options.can_close&&this.$element.on("click",function(){_this.hide()}),"function"==typeof this.options.on_click&&(this.on_click=this.options.on_click),this.is_visible=!0,this.is_appended||(this.$element.appendTo("body"),this.is_appended=!0),this.$element.fadeIn()))},hide:function(){this.is_visible=!1,this.$element.fadeOut()}},MU.Overlay=Overlay}(Zepto,MU);